{% extends 'header.html' %}
{% import "experiments/experiment_macros.html" as exp_macros %}
{% import "macros.html" as macros %}

{% block head %}
<meta name="csrf-token" content="{{ csrf_token() }}">
<script src="{{ url_for('static', filename='js/common_ajax.js') }}"></script>
<script src="{{ url_for('static', filename='js/experiments_ajax.js') }}"></script>
{{ macros.import_datetimepicker() }}
{% endblock %}

{% block title %}{{ experiment.name }} - Settings{% endblock %}

{% block content %}
<h3>General settings</h2>

<form action="{{ url_for('experiments.update_experiment',
experiment_id=experiment.id) }}" method="put" id="update-experiment-form">
  {{ macros.render_field(update_experiment_form.name) }}
  {{ macros.render_field(update_experiment_form.start) }}
  {{ macros.render_field(update_experiment_form.stop) }}
  {{ macros.render_field(update_experiment_form.blurb) }}
  {{ macros.render_field(update_experiment_form.submit, value="Save",
  class_="btn-success") }}
</form>

<hr>

<h3>Assign activities</h3>
<p><a href="{{ url_for('core.export') }}">Download existing data
  (.xlsx)</a></p>
<p><a href="{{ url_for('core.import_template') }}">Download template for
  imports</a></p>
<p>Simply fill in the columns in the import template and upload it below to
create assignments.</p>

<form action="{{ url_for('experiments.import_assignments',
experiment_id=experiment.id) }}" method="put" id="import-assignment-form">
{{ macros.render_form(import_assignment_form) }}
</form>

<hr>

<h3>Delete experiment</h3>
<div class="alert alert-danger" role="alert">
  {{ macros.render_glyphicon("exclamation-sign") }}
  Warning: this cannot be undone!
</div>
<form action="{{ url_for('experiments.delete_experiment', experiment_id=experiment.id)
}}" method="delete" id="experiment-delete-form">
  {{ macros.render_field(delete_experiment_form.submit, value="Delete",
  class_="btn-danger") }}
</form>
{% endblock %}
